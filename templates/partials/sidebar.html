<div class="sidebar-section">
  <div class="sidebar-dropdown" data-dropdown-type="workspace">
    <div class="sidebar-title dropdown-toggle">
      <span>Workspaces</span>
      <i class="fas fa-chevron-down dropdown-arrow"></i>
    </div>
    <div class="dropdown-content">
      {% for membership in user.memberships.all %}
      <a
        href="{% url 'workspace:workspace-detail' membership.workspace.id %}"
        class="sidebar-link {% if current_workspace.id == membership.workspace.id %}active{% endif %}"
        data-dropdown-item="workspace"
      >
        <i class="fa-solid fa-building"></i>
        <span>{{membership.workspace.name}}</span>
      </a>
      {% endfor %}
      <a
        href="{% url 'workspace:create-workspace' %}"
        class="sidebar-link {% if request.resolver_match.url_name == 'create-workspace' %}active{% endif %}"
        data-dropdown-item="workspace"
      >
        <i class="fa-solid fa-plus"></i>
        <span>New Workspace</span>
      </a>
    </div>
  </div>
</div>

{% if current_workspace %}
<div class="sidebar-section">
  <div class="sidebar-dropdown" data-dropdown-type="navigation">
    <div class="sidebar-title dropdown-toggle">
      <span>Navigation</span>
      <i class="fas fa-chevron-down dropdown-arrow"></i>
    </div>
    <div class="dropdown-content">
      <a
        href="{% url 'workspace:workspace-detail' current_workspace.id %}"
        class="sidebar-link {% if request.resolver_match.url_name == 'workspace-detail' %}active{% endif %}"
        data-dropdown-item="navigation"
      >
        <i class="fa-solid fa-grip"></i>
        <span>Dashboard</span>
      </a>
      <a
        href="{% url 'kanban:kanban' current_workspace.id %}"
        class="sidebar-link {% if request.resolver_match.url_name == 'kanban' %}active{% endif %}"
        data-dropdown-item="navigation"
      >
        <i class="fa-solid fa-table-columns"></i>
        <span>Kanban Board</span>
      </a>
      <a
        href="{% url 'team:team' current_workspace.id %}"
        class="sidebar-link {% if request.resolver_match.url_name == 'team' %}active{% endif %}"
        data-dropdown-item="navigation"
      >
        <i class="fa-solid fa-sitemap"></i>
        <span>Team</span>
      </a>
      <a
        href="{% url 'activity:activity' current_workspace.id %}"
        class="sidebar-link {% if request.resolver_match.url_name == 'activity' %}active{% endif %}"
        data-dropdown-item="navigation"
      >
        <i class="fa-solid fa-chart-line"></i>
        <span>Activity</span>
      </a>
    </div>
  </div>
</div>

<div class="sidebar-section">
  <div class="sidebar-dropdown" data-dropdown-type="project">
    <div class="sidebar-title dropdown-toggle">
      <span>Projects</span>
      <i class="fas fa-chevron-down dropdown-arrow"></i>
    </div>
    <div class="dropdown-content">
      {% for project in current_workspace.projects.all %}
      <a
        href="{% url 'kanban:kanban' current_workspace.id %}?project={{ project.id }}"
        class="sidebar-link"
        data-dropdown-item="project"
      >
        <i class="fa-solid fa-list-check"></i>
        <span>{{ project.name }}</span>
      </a>
      {% empty %}
      <span class="sidebar-link text-muted">
        <i class="fa-solid fa-inbox"></i>
        <span>No projects yet</span>
      </span>
      {% endfor %}
      <a
        href="{% url 'workspace:create-project' current_workspace.id %}"
        class="sidebar-link"
        data-dropdown-item="project"
      >
        <i class="fa-solid fa-plus"></i>
        <span>New Project</span>
      </a>
    </div>
  </div>
</div>
{% endif %}